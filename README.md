# Auto-Shawarma

全自动沙威玛小工具，让我们说 Python ~

借助 OpenCV 图像识别，看游戏自己玩，即使顾客自选配料也能满足需要！

**已实现功能：**

- **手动模式**
  - 使用按键进行各种操作
    - 制作沙威玛
    - 准备饮料
    - 盛薯条
    - 识别顾客订单并上菜

- **半自动模式**：在手动模式的基础上增加了
  - 自动打小偷、叫乞丐
  - 自动取出烤好的沙威玛避免烤焦

  在没有键盘指令时：
  - 自动准备饮料和盛薯条
  - 自动切薯条和炸薯条
  - 自动定时收钱

- **全自动模式**：在半自动模式的基础上增加了
  - 根据顾客需求自动制作沙威玛，支持自选配料！
  - 自动上菜

> [!IMPORTANT]
> 仓库中的坐标配置与图像识别模板来自 1920*1080 分辨率的 Android 版布局，其他分辨率或桌面版本游戏须自行调整修改，不能开箱即用。


## 安装启动

工具需要以下依赖库：
- `mss` - 截取屏幕
- `opencv-python` - 图像识别
- `pynput` - 键盘输入监听与鼠标控制

启动终端进入仓库目录，执行以下命令：

- 安装：`pip install -r requirements.txt`

- 启动：`python main.py`

    此时提示 `>> Main loop start` 表示脚本开始接受键盘输入，按 `Esc` 可退出脚本


## 按键操作

|    控制按键     | 功能       |
| :-------------: | ---------- |
| `Esc` / `Pause` | 退出       |
|       `9`       | 停止工作   |
|       `0`       | 手动模式   |
|       `-`       | 半自动模式 |
|       `=`       | 全自动模式 |

|      按键       | 功能                                           |
| :-------------: | ---------------------------------------------- |
|       `s`       | 制作普通沙威玛                                 |
| `q` `w` `e` `r` | 分别制作不加 石榴酱、黄瓜、白酱、薯条 的沙威玛 |
|     `1`~`5`     | 为对应位置的顾客上菜                           |
|       `d`       | 收钱                                           |
|       `r`       | 准备饮料                                       |
|     `f` `v`     | 分两步盛薯条                                   |


## 配置文件

使用时，需修改以下两个配置文件

- `position.py` - 坐标点配置

    文件内是图像识别与鼠标操作使用的坐标点，与 `img` 目录下的识别模板搭配使用。

- `config.py` - 游戏内升级情况配置

    文件内各变量下有注释说明，根据游戏内各物品升级情况修改，修改后重启脚本生效。
